[mysqld_safe]
pid-file=/data1/env/mysql57/data/mysqld.pid
open-files-limit = 8192

[mysql]
port=3306
prompt=\\u@\\d \\r:\\m:\\s>
default-character-set=utf8
no-auto-rehash
connect_timeout=5
pager=more
#safe-updates

[client]
port=3306
socket=/tmp/mysql.sock

[mysqld]
#dir
basedir=/data1/env/mysql57
datadir=/data1/env/mysql57/data
tmpdir=/data1/env/mysql57/tmp
log-error=/data1/env/mysql57/log/error.log
lc-messages-dir=/data1/env/mysql57/share/english
slow_query_log_file=/data1/env/mysql57/log/slow.log
general_log_file=/data1/env/mysql57/log/general.log
socket=/tmp/mysql.sock
show_compatibility_56=1

#innodb
innodb_data_home_dir=/data1/env/mysql57/data
innodb_log_group_home_dir=/data1/env/mysql57/data
innodb_data_file_path=ibdata1:1G;ibdata2:1G:autoextend
innodb_buffer_pool_size=2G
innodb_buffer_pool_instances=32
innodb_log_files_in_group=3
innodb_log_file_size=1G
innodb_log_buffer_size=20M
innodb_flush_log_at_trx_commit=1
innodb_max_dirty_pages_pct=60
innodb_io_capacity=1000
innodb_thread_concurrency=16
innodb_read_io_threads=8
innodb_write_io_threads=8
innodb_open_files=60000
innodb_file_per_table=1
innodb_flush_method=O_DIRECT
innodb_change_buffering=inserts
innodb_adaptive_flushing=1
innodb_old_blocks_time=1000
innodb_stats_on_metadata=0
innodb_read_ahead_threshold=0
innodb_use_native_aio=0
innodb_lock_wait_timeout=5
innodb_rollback_on_timeout=0
innodb_purge_threads=1
innodb_strict_mode=1
innodb_page_size=16384

#*** MyISAM Specific options
key_buffer_size = 128M
bulk_insert_buffer_size = 32M
myisam_sort_buffer_size = 32M

##replication
master-info-file=/data1/env/mysql57/data/master.info
relay-log=/data1/env/mysql57/arch/relaylog
relay_log_info_file=/data1/env/mysql57/data/relay-log.info
relay-log-index=/data1/env/mysql57/data/mysqld-relay-bin.index
slave_type_conversions="ALL_NON_LOSSY"
slave_net_timeout=60
skip-slave-start
sync_master_info=100
sync-relay-log = 100
sync_relay_log_info=100
relay_log_purge = 0
log_slave_updates = 1

##binlog
log-bin=/data1/env/mysql57/arch/mysql-bin
binlog_cache_size=2M
max_heap_table_size = 128M
max_binlog_cache_size=2G
max_binlog_size=1G
binlog_format=row
sync_binlog=1
log-slave-updates=1
expire_logs_days=0

##server
server-id=1481866470
default-storage-engine=INNODB
character-set-server=utf8
lower_case_table_names=1
skip-external-locking
skip_name_resolve
open_files_limit=65536
safe-user-create
local-infile=1
performance_schema=0
default-time-zone = "+8:00"
transaction_isolation = READ-COMMITTED
sql_mode = NO_ENGINE_SUBSTITUTION

#slow query
log_slow_admin_statements=1
log_error_verbosity=2
long_query_time=1
slow_query_log=1
general_log=0
explicit_defaults_for_timestamp=true

#query cache
query_cache_type=0
query_cache_limit=4M
query_cache_min_res_unit=1K

table_open_cache = 4096
table_definition_cache=8592

thread_stack=384K
thread_cache_size=256
read_buffer_size = 4M
read_rnd_buffer_size = 16M
sort_buffer_size=2M
join_buffer_size=2M
read_buffer_size=2M
tmp_table_size=16M

port=3306
skip-name-resolve
skip-ssl
max_connections=3000
max_user_connections=3000
max_connect_errors=100
max_allowed_packet=64M
connect_timeout=8
wait_timeout=28800
net_read_timeout=30
net_write_timeout=60
back_log=1024

[mysqldump]
quick
max_allowed_packet = 32M
