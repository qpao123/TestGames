[global]
pid = run/php-fpm.pid

error_log = /data1/logs/php-fpm/error.fpm.log

syslog.facility = daemon

syslog.ident = php-fpm

log_level = notice

emergency_restart_threshold = 0

emergency_restart_interval = 0


process.max = 300


daemonize = yes

rlimit_files = 65535

events.mechanism = epoll



[php-fpm-001]
user = www
group = www
listen = /dev/shm/php-fpm1.sock
listen.owner = www
listen.group = www
listen.mode = 0660
listen.backlog = 128
listen.allowed_clients = 127.0.0.1

pm = dynamic
pm.max_children = 200
pm.start_servers = 12
pm.min_spare_servers = 12
pm.max_spare_servers = 24
pm.process_idle_timeout = 10s;
pm.max_requests = 10000
pm.status_path = /status

[php-fpm-002]
user = www
group = www
listen = /dev/shm/php-fpm2.sock
listen.owner = www
listen.group = www
listen.mode = 0660
listen.backlog = 128
listen.allowed_clients = 127.0.0.1

pm = dynamic
pm.max_children = 200
pm.start_servers = 12
pm.min_spare_servers = 12
pm.max_spare_servers = 24
pm.process_idle_timeout = 10s;
pm.max_requests = 10000
pm.status_path = /status

[php-fpm-003]
user = www
group = www
listen = /dev/shm/php-fpm4.sock
listen.owner = www
listen.group = www
listen.mode = 0660
listen.backlog = 128
listen.allowed_clients = 127.0.0.1

pm = dynamic  #动态创建进程
pm.max_children = 200  #最大子进程200
pm.start_servers = 12  #初始子进程12
pm.min_spare_servers = 12 #最小闲置进程
pm.max_spare_servers = 24 #最大闲置进程，超过就会定期关闭
pm.process_idle_timeout = 10s;
pm.max_requests = 10000   #每个进程接受的请求最大数
pm.status_path = /status

access.log = /data1/logs/php-fpm/access.fpm.log
access.format = "%R - %u %t \"%m %r%Q%q\" %s %f %{mili}d %{kilo}M %C%%"

slowlog = /data1/logs/php-fpm/log.slow
request_slowlog_timeout = 15
request_terminate_timeout = 300

catch_workers_output = yes
security.limit_extensions = .php .php3 .php4 .php5
env[HOSTNAME] = $HOSTNAME
env[TEMP] = /tmp
